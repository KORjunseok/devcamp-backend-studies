# 2주차 2일 정리 
---
## 코드 작성 방향
##### 쿠폰 
1. 요구 사항에 정액제와 정률제 쿠폰에 따른 구조와 API 생성이 있는 데 우선 순위를 가장 먼저 두어서 해보자 (1순위). 가장 간단하게 구현한다면 해당 금액에 일률적인 퍼센트를 적용하는 게 될 걸로 생각한다. (좀 더 실제 사이트와 구현하려고 한다면 중복 쿠폰 기능을 구현하거나 최대 할인액을 설정한다.) 

2. 해당 상품을 쿠폰 적용할 경우에 보통 15,000원 이상일 시만 사용할 수 있다던가 제한이 붙어 있는 경우가 많기에 이 형태로 구현해 보면 좋을 듯. 간단하게는 if문으로 구현할 수 있지 않을까 생각이 든다. (2순위)

3. 실제 사이트에선 카테고리에 따라 적용되는 쿠폰이 있는 게 대다수다. 단기간에 코드로 구현하기 어렵다면 우선순위를 뒤로 위치해. 기본적인 기능 구현 뒤에 시도하는 게 좋아 보임 

4. 쿠폰 사용 기간에 제한을 두어 특정 기간이 지나면 쿠폰을 자동 소멸하게 만들 수도 있다. (회원가입 시 한 달 or 일주일 기한) 

##### 포인트
1. 요구 사항. 다양한 케이스를 상정하고 다루어 보자. 가장 기본적으로 구현하게 된다면 결제 금액에 따른 일정 퍼센트를 포인트로 환산하는 게 되겠다. (10,000원 결제 5% 포인트 금액 전환). 그리고 다음 결제부터 사용하게끔 구현하는 게 기본적인 구현이 될 걸로 본다. 쿠폰을 선적용 그 후에 포인트를 적용한다. 

2. 포인트 전환금 . 포인트 자체를 결제하여 10,000 결제 10,500 포인트 전환 식으로 구현하는 방법도 있다.  

3. 결제 시 다른 결제 방법으로 결제할 경우 포인트를 추가 지급 +2%로 구현하는 것도 방법이다. (ex. 네이버 페이로 결제 시 +2% 지급)

##### 대략적인 ERD 
![ERD](https://velog.velcdn.com/images/y21zzp/post/4d3a8054-771e-4f16-bcdd-c04b027a0633/image.png)

1. point와 point_log 두 개의 테이블을 만들어. point는 총 포인트를 관리하는 테이블로 point_log는 포인트가 사용될 때마다 관리 테이블로 이용할 계획. 

2. 예시 코드에 IssuedCoupon 테이블이 존재하는데 없어도 사용 가능한 방향으로 ERD를 고려하고 있다. 

3. IssuedCoupon 테이블을 만들어 due_date 형태로 마감기한을 주려는 용도인가? 하나의 테이블로 관리해도 되지 않을까 싶은데.. 생각을 더 해보고 결정하겠다. 